{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["require.config({\r\n    paths: {\r\n        'datatables.net': 'https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min',\r\n        'datatables.net-bs4': 'https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap4.min',\r\n        'datatables.net-buttons': 'https://cdn.datatables.net/buttons/2.3.3/js/dataTables.buttons.min',\r\n        'datatables.net-buttons-bs4': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.bootstrap4.min',\r\n        'datatables.net-buttons-colvis': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.colVis.min',\r\n        'datatables.net-buttons-print': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.print.min',\r\n        'datatables.net-buttons-html': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.html5.min',\r\n        'datatables.net-responsive': 'https://cdn.datatables.net/responsive/2.4.0/js/dataTables.responsive.min',\r\n        'datatables.net-responsive-bs4': 'https://cdn.datatables.net/responsive/2.4.0/js/responsive.bootstrap4.min',\r\n        'datatables.net-scroller-bs4': 'https://cdn.datatables.net/scroller/2.0.0/js/dataTables.scroller.min',\r\n        'datatables.net-select-bs4': 'https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min'\r\n    }\r\n});\r\n\r\ndefine([\r\n    'jquery',\r\n    'core/str',\r\n    'core/ajax',\r\n    'core/notification',\r\n    'datatables.net',\r\n    'datatables.net-bs4',\r\n    'datatables.net-buttons',\r\n    'datatables.net-buttons-bs4',\r\n    'datatables.net-buttons-colvis',\r\n    'datatables.net-buttons-print',\r\n    'datatables.net-buttons-html',\r\n    'datatables.net-responsive',\r\n    'datatables.net-responsive-bs4',\r\n    'datatables.net-scroller-bs4',\r\n    'datatables.net-select-bs4'\r\n], function($, str, ajax, notification) {\r\n\r\n    var userlist = {\r\n        dom: {\r\n            main: null,\r\n            table: null\r\n        },\r\n        langs: {\r\n            somethingWentWrong: null,\r\n            userlist: null\r\n        },\r\n        variables: {\r\n            dataTableReference: null,\r\n            baseurl: null\r\n        },\r\n\r\n        actions: {\r\n            getString: function() {\r\n\r\n                str.get_strings([\r\n                    { key: 'something_went_wrong', component: 'local_reporttab' },\r\n                    { key: 'user_reports_title', component: 'local_reporttab' }\r\n                ]).done(function(s) {\r\n                    userlist.langs.somethingWentWrong = s[0];\r\n                    userlist.langs.userlist = s[1];\r\n                    userlist.init();\r\n                });\r\n            },\r\n\r\n            getuserlist: function(selectedBatch) {\r\n                var promises = ajax.call([{\r\n                    methodname: 'local_assessmentreport_get_user_reports',\r\n                    args: {\r\n                            batch : selectedBatch,\r\n                    }\r\n                }]);\r\n\r\n                promises[0].done(function(response) {\r\n                    if (userlist.variables.dataTableReference) {\r\n                        userlist.variables.dataTableReference.clear();\r\n                        userlist.variables.dataTableReference.rows.add(response.data);\r\n                        userlist.variables.dataTableReference.draw();\r\n                    }\r\n                }).fail(function() {\r\n                    notification.addNotification({\r\n                        type: 'error',\r\n                        message: userlist.langs.somethingWentWrong\r\n                    });\r\n                });\r\n            }\r\n        },\r\n\r\n        init: function() {\r\n\r\n            userlist.dom.main = $('#user_reports');\r\n            userlist.dom.table = userlist.dom.main.find('#userreportTable');\r\n            userlist.variables.dataTableReference = userlist.dom.table.DataTable({\r\n                responsive: true,\r\n                scrollCollapse: true,\r\n                serverSide: false,\r\n                processing: true,\r\n                order: [[0, \"asc\"]],\r\n                \r\n                buttons: [\r\n                    { extend: 'copy', className: 'btn btn-sm btn-purple text-white me-2', text: 'Copy' },\r\n                    { extend: 'csv', className: 'btn btn-sm btn-purple text-white me-2', text: 'CSV' },\r\n                    { extend: 'excel', className: 'btn btn-sm btn-purple text-white me-2', text: 'Excel' },\r\n                    { extend: 'print', className: 'btn btn-sm btn-purple text-white', text: 'Print' }\r\n                ],\r\n                columns: [\r\n                    { data: 'batch' },          \r\n                    { data: 'username' },\r\n                    { data: 'email', visible: false },         \r\n                    { data: 'phone', visible: false },       \r\n                    { data: 'degree', visible: false },\r\n                    { data: 'department' },\r\n                    { data: 'cgpa', visible: false },  \r\n                    { data: 'questiontype' },\r\n                    { data: 'correct25' },       \r\n                    { data: 'correct2665' },     \r\n                    { data: 'total_correct' },   \r\n                    { data: 'work_on_chennai', visible: false }, \r\n                    { data: 'backlog', visible: false },         \r\n                    { data: 'offerinhand', visible: false },     \r\n                    { data: 'immediatejoin', visible: false },\r\n                    { data: 'timecreated' }\r\n                ],\r\n\r\n\r\n                dom: \r\n                \"<'row mb-3'<'col-md-12 d-flex justify-content-end align-items-center'Bf>>\" +\r\n                     \"<'row'<'col-sm-12'tr>>\" +\r\n                     \"<'row mt-3'<'col-sm-12 col-md-5 dt-info'i><'col-sm-12 col-md-7 d-flex justify-content-end'p>>\",\r\n                initComplete: function() {\r\n                    $('.dt-buttons').addClass('pr-2 d-flex align-items-center');\r\n\r\n                    // Clean up the search box label text\r\n                    $('.dataTables_filter label').each(function () {\r\n                        const $label = $(this);\r\n                        const $input = $label.find('input');\r\n                        $input.attr('placeholder', 'Search');\r\n                        $label.contents().filter(function () { return this.nodeType === 3; }).remove();\r\n                    });\r\n\r\n                    // âœ… Create batch dropdown with \"All Batch\" as first option\r\n                    var $batchSelector = $('<select id=\"batchSelector\" class=\"form-select mb-2 mr-2\" style=\"border-radius:12px; padding:8px 12px; width:auto; min-width:150px;\"></select>');\r\n                    $batchSelector.append('<option value=\"0\">All Batch</option>'); // empty value = show all\r\n                     for (var i = 1; i <= 10; i++) {\r\n                        $batchSelector.append('<option value=\"' + i + '\">Batch ' + i + '</option>');\r\n                    }\r\n\r\n                    // Append the dropdown after the DataTables buttons\r\n                    $('.dt-buttons').after($batchSelector);\r\n\r\n                    // Filter table on batch selection\r\n                    $('#batchSelector').on('change', function() {\r\n                        var selectedBatch = $(this).val();\r\n                        userlist.actions.getuserlist(selectedBatch);\r\n                    });\r\n                },\r\n\r\n\r\n\r\n                language: {\r\n                    emptyTable: \"No data available\",\r\n                    paginate: {\r\n                        previous: \"<\",\r\n                        next: \">\"\r\n                    }\r\n                }\r\n            });\r\n            var selectedBatch = 0;\r\n            userlist.actions.getuserlist(selectedBatch);\r\n        }\r\n    };\r\n\r\n    return {\r\n        init: userlist.actions.getString\r\n    };\r\n    \r\n});\r\n\r\n"],"names":["require","config","paths","define","$","str","ajax","notification","userlist","dom","main","table","langs","somethingWentWrong","variables","dataTableReference","baseurl","actions","getString","get_strings","key","component","done","s","init","getuserlist","selectedBatch","call","methodname","args","batch","response","clear","rows","add","data","draw","fail","addNotification","type","message","find","DataTable","responsive","scrollCollapse","serverSide","processing","order","buttons","extend","className","text","columns","visible","initComplete","addClass","each","$label","this","attr","contents","filter","nodeType","remove","$batchSelector","append","i","after","on","val","language","emptyTable","paginate","previous","next"],"mappings":"AAAAA,QAAQC,OAAO,CACXC,MAAO,kBACe,kFACI,0FACI,kGACI,qGACG,gGACD,8FACD,4FACF,2GACI,yGACF,mGACF,sEAIrCC,sCAAO,CACH,SACA,WACA,YACA,oBACA,iBACA,qBACA,yBACA,6BACA,gCACA,+BACA,8BACA,4BACA,gCACA,8BACA,8BACD,SAASC,EAAGC,IAAKC,KAAMC,kBAElBC,SAAW,CACXC,IAAK,CACDC,KAAM,KACNC,MAAO,MAEXC,MAAO,CACHC,mBAAoB,KACpBL,SAAU,MAEdM,UAAW,CACPC,mBAAoB,KACpBC,QAAS,MAGbC,QAAS,CACLC,UAAW,WAEPb,IAAIc,YAAY,CACZ,CAAEC,IAAK,uBAAwBC,UAAW,mBAC1C,CAAED,IAAK,qBAAsBC,UAAW,qBACzCC,MAAK,SAASC,GACbf,SAASI,MAAMC,mBAAqBU,EAAE,GACtCf,SAASI,MAAMJ,SAAWe,EAAE,GAC5Bf,SAASgB,WAIjBC,YAAa,SAASC,eACHpB,KAAKqB,KAAK,CAAC,CACtBC,WAAY,0CACZC,KAAM,CACEC,MAAQJ,kBAIX,GAAGJ,MAAK,SAASS,UAClBvB,SAASM,UAAUC,qBACnBP,SAASM,UAAUC,mBAAmBiB,QACtCxB,SAASM,UAAUC,mBAAmBkB,KAAKC,IAAIH,SAASI,MACxD3B,SAASM,UAAUC,mBAAmBqB,WAE3CC,MAAK,WACJ9B,aAAa+B,gBAAgB,CACzBC,KAAM,QACNC,QAAShC,SAASI,MAAMC,0BAMxCW,KAAM,WAEFhB,SAASC,IAAIC,KAAON,EAAE,iBACtBI,SAASC,IAAIE,MAAQH,SAASC,IAAIC,KAAK+B,KAAK,oBAC5CjC,SAASM,UAAUC,mBAAqBP,SAASC,IAAIE,MAAM+B,UAAU,CACjEC,YAAY,EACZC,gBAAgB,EAChBC,YAAY,EACZC,YAAY,EACZC,MAAO,CAAC,CAAC,EAAG,QAEZC,QAAS,CACL,CAAEC,OAAQ,OAAQC,UAAW,wCAAyCC,KAAM,QAC5E,CAAEF,OAAQ,MAAOC,UAAW,wCAAyCC,KAAM,OAC3E,CAAEF,OAAQ,QAASC,UAAW,wCAAyCC,KAAM,SAC7E,CAAEF,OAAQ,QAASC,UAAW,mCAAoCC,KAAM,UAE5EC,QAAS,CACL,CAAEjB,KAAM,SACR,CAAEA,KAAM,YACR,CAAEA,KAAM,QAASkB,SAAS,GAC1B,CAAElB,KAAM,QAASkB,SAAS,GAC1B,CAAElB,KAAM,SAAUkB,SAAS,GAC3B,CAAElB,KAAM,cACR,CAAEA,KAAM,OAAQkB,SAAS,GACzB,CAAElB,KAAM,gBACR,CAAEA,KAAM,aACR,CAAEA,KAAM,eACR,CAAEA,KAAM,iBACR,CAAEA,KAAM,kBAAmBkB,SAAS,GACpC,CAAElB,KAAM,UAAWkB,SAAS,GAC5B,CAAElB,KAAM,cAAekB,SAAS,GAChC,CAAElB,KAAM,gBAAiBkB,SAAS,GAClC,CAAElB,KAAM,gBAIZ1B,IACA,+LAGA6C,aAAc,WACVlD,EAAE,eAAemD,SAAS,kCAG1BnD,EAAE,4BAA4BoD,MAAK,iBACzBC,OAASrD,EAAEsD,MACFD,OAAOhB,KAAK,SACpBkB,KAAK,cAAe,UAC3BF,OAAOG,WAAWC,QAAO,kBAAuC,IAAlBH,KAAKI,YAAmBC,gBAItEC,eAAiB5D,EAAE,iJACvB4D,eAAeC,OAAO,4CAChB,IAAIC,EAAI,EAAGA,GAAK,GAAIA,IACtBF,eAAeC,OAAO,kBAAoBC,EAAI,WAAaA,EAAI,aAInE9D,EAAE,eAAe+D,MAAMH,gBAGvB5D,EAAE,kBAAkBgE,GAAG,UAAU,eACzB1C,cAAgBtB,EAAEsD,MAAMW,MAC5B7D,SAASS,QAAQQ,YAAYC,mBAMrC4C,SAAU,CACNC,WAAY,oBACZC,SAAU,CACNC,SAAU,IACVC,KAAM,QAKlBlE,SAASS,QAAQQ,YADG,WAKrB,CACHD,KAAMhB,SAASS,QAAQC"}