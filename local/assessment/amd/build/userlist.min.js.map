{"version":3,"file":"userlist.min.js","sources":["../src/userlist.js"],"sourcesContent":["require.config({\n    paths: {\n        'datatables.net': 'https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min',\n        'datatables.net-bs4': 'https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap4.min',\n        'datatables.net-buttons': 'https://cdn.datatables.net/buttons/2.3.3/js/dataTables.buttons.min',\n        'datatables.net-buttons-bs4': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.bootstrap4.min',\n        'datatables.net-buttons-colvis': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.colVis.min',\n        'datatables.net-buttons-print': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.print.min',\n        'datatables.net-buttons-html': 'https://cdn.datatables.net/buttons/2.3.3/js/buttons.html5.min',\n        'datatables.net-responsive': 'https://cdn.datatables.net/responsive/2.4.0/js/dataTables.responsive.min',\n        'datatables.net-responsive-bs4': 'https://cdn.datatables.net/responsive/2.4.0/js/responsive.bootstrap4.min',\n        'datatables.net-scroller-bs4': 'https://cdn.datatables.net/scroller/2.0.0/js/dataTables.scroller.min',\n        'datatables.net-select-bs4': 'https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min'\n    }\n});\n\ndefine([\n    'jquery',\n    'core/str',\n    'core/ajax',\n    'core/notification',\n    'datatables.net',\n    'datatables.net-bs4',\n    'datatables.net-buttons',\n    'datatables.net-buttons-bs4',\n    'datatables.net-buttons-colvis',\n    'datatables.net-buttons-print',\n    'datatables.net-buttons-html',\n    'datatables.net-responsive',\n    'datatables.net-responsive-bs4',\n    'datatables.net-scroller-bs4',\n    'datatables.net-select-bs4'\n], function($, str, ajax, notification) {\n\n    var userlist = {\n        dom: {\n            main: null,\n            table: null\n        },\n        langs: {\n            somethingWentWrong: null,\n            userlist: null\n        },\n        variables: {\n            dataTableReference: null,\n            baseurl: null\n        },\n\n        actions: {\n            getString: function() {\n\n                str.get_strings([\n                    { key: 'something_went_wrong', component: 'local_reporttab' },\n                    { key: 'user_reports_title', component: 'local_reporttab' }\n                ]).done(function(s) {\n                    userlist.langs.somethingWentWrong = s[0];\n                    userlist.langs.userlist = s[1];\n                    userlist.init();\n                });\n            },\n\n            getuserlist: function() {\n                var promises = ajax.call([{\n                    methodname: 'local_assessment_get_user_list',\n                    args: {}\n                }]);\n\n                promises[0].done(function(response) {\n                    if (userlist.variables.dataTableReference) {\n                        userlist.variables.dataTableReference.clear();\n                        userlist.variables.dataTableReference.rows.add(response.data);\n                        userlist.variables.dataTableReference.draw();\n                    }\n                }).fail(function() {\n                    notification.addNotification({\n                        type: 'error',\n                        message: userlist.langs.somethingWentWrong\n                    });\n                });\n            }\n        },\n\n        init: function() {\n\n            userlist.dom.main = $('#user_reports');\n            userlist.dom.table = userlist.dom.main.find('#userreportTable');\n\n            userlist.variables.dataTableReference = userlist.dom.table.DataTable({\n                responsive: true,\n                serverSide: false,\n                processing: true,\n                order: [[0, \"asc\"]],\n                buttons: [\n                    { extend: 'copy', className: 'btn btn-sm btn-purple text-white me-2', text: 'Copy' },\n                    { extend: 'csv', className: 'btn btn-sm btn-purple text-white me-2', text: 'CSV' },\n                    { extend: 'excel', className: 'btn btn-sm btn-purple text-white me-2', text: 'Excel' },\n                    { extend: 'print', className: 'btn btn-sm btn-purple text-white', text: 'Print' }\n                ],\n                columns: [\n                    \n                    { data: 'batch', title: 'Batch', defaultContent: '-' },\n                    { data: 'email', title: 'Email', defaultContent: '-' },\n                    { data: 'degree', title: 'Degree', defaultContent: '-' },\n                    { data: 'department', title: 'Department', defaultContent: '-' },\n                    { data: 'cgpa', title: 'CGPA', defaultContent: '-' },\n                    { data: 'questiontype', title: 'Question Type', defaultContent: '-' },\n                    { data: 'total_score', title: 'Total score', defaultContent: '0' },\n                    { data: 'work_on_chennai', title: 'Work on chennai', defaultContent: '-' },\n                    { data: 'backlog', title: 'Backlog', defaultContent: '-' },\n                    { data: 'offerinhand', title: 'Offer in hand', defaultContent: '-' },\n                    { data: 'immediatejoin', title: 'Immediate Joiner', defaultContent: '-' },\n                    { data: 'timecreated', title: 'Time created', defaultContent: '0' },\n\n                ],\n\n\n                dom: \"<'row mb-3'<'col-md-12 d-flex justify-content-end align-items-center'Bf>>\" +\n                     \"<'row'<'col-sm-12'tr>>\" +\n                     \"<'row mt-3'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\",\n                initComplete: function() {\n                    $('.dt-buttons').addClass('pr-2 d-flex');\n                    $('.dataTables_filter label').each(function () {\n                        const $label = $(this);\n                        const $input = $label.find('input');\n                        $input.attr('placeholder', 'Search');\n                        $label.contents().filter(function () { return this.nodeType === 3; }).remove();\n                    });\n                },\n                language: {\n                    emptyTable: \"No data available\",\n                    paginate: {\n                        previous: \"<\",\n                        next: \">\"\n                    }\n                }\n            });\n\n            // Fetch report data AFTER table is initialized\n            userlist.actions.getuserlist();\n        }\n    };\n\n    return {\n        init: userlist.actions.getString\n    };\n});\n\n"],"names":["require","config","paths","define","$","str","ajax","notification","userlist","dom","main","table","langs","somethingWentWrong","variables","dataTableReference","baseurl","actions","getString","get_strings","key","component","done","s","init","getuserlist","call","methodname","args","response","clear","rows","add","data","draw","fail","addNotification","type","message","find","DataTable","responsive","serverSide","processing","order","buttons","extend","className","text","columns","title","defaultContent","initComplete","addClass","each","$label","this","attr","contents","filter","nodeType","remove","language","emptyTable","paginate","previous","next"],"mappings":"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"}